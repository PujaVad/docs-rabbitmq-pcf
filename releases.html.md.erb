---
title: RabbitMQ&reg; for PCF Release Notes
owner: London Services
---

## <a id="upgrade"></a> Upgrade to the Latest Version

Pivotal recommends that you upgrade to the latest version of your current minor line,
then upgrade to the latest available version of the new minor line.
For example, if you use an older v1.13.x version,
upgrade to the latest v1.13.x version before upgrading to the latest v1.14.x version.

For product versions and upgrade paths,
see the [Product Compatibility Matrix](http://docs.pivotal.io/compatibility-matrix.pdf).

## <a id="deprecation"></a> Pivotal Is Continuing Support for the Pre-Provisioned Service

<%= vars.note_pre_provisioned %>

For information about migrating from the pre-provisioned service to the on-demand
service, see
[About Migrating a Pre-Provisioned Instance to an On-Demand Instance](./ondemand.html#migrating-from-mt).
For instructions on how to install, configure, and deploy RabbitMQ for PCF
as an on-demand service, see <a href="./install-config.html">
Installing and Configuring RabbitMQ for PCF the On-Demand Service</a>.

## <a id="11412"></a> v1.14.12

**Release Date**: May XX, 2019

### Features

New features and changes in this release:

* Errands and the pre-provisioned service broker can be deployed over HTTPS.
* Updates OSS RabbitMQ to 3.7.14

## Security Fixe

This release includes the following security fix:

* High [CVE-2019-3789: Gorouter allows space developer to hijack route services hosted outside the platform](https://pivotal.io/security/cve-2019-3789)

### Resolved Issue

This release fixes the following issue:

* An issue with service metrics caused zombie processes to accumulate on `rabbitmq-server` VMs. 

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang cookie explicitly in the tile configuration,
  you are not affected by this issue.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value requires cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.14
* Erlang v20.3.8.20
* HAProxy v1.8.19

## <a id="11410"></a> v1.14.10

**Release Date**: March 28, 2019

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Resolved Issues

This release fixes the following issue:

* Issues with the configuration of pre-provisioned RabbitMQ with external load balancers

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang cookie explicitly in the tile configuration,
  you are not affected by this issue.

* An issue with service metrics causes zombie processes to accumulate on
`rabbitmq-server` VMs.
This can cause the VM to run out of resources and BOSH to restart it.
If this occurs, Pivotal recommends that you stop the `service-metrics` job.
However, if you stop the job, metrics will not be available.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value requires cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.13
* Erlang v20.3.8.20
* HAProxy v1.8.19

## <a id="1149"></a> v1.14.9

**Release Date**: March 14, 2019

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

* Adds RabbitMQ 3.7.13

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang cookie explicitly in the tile configuration,
  you are not affected by this issue.

* An issue with service metrics causes zombie processes to accumulate on
`rabbitmq-server` VMs.
This can cause the VM to run out of resources and BOSH to restart it.
If this occurs, Pivotal recommends that you stop the `service-metrics` job.
However, if you stop the job, metrics will not be available.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value requires cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

* There are issues with the configuration of pre-provisioned RabbitMQ with external load balancers.

### Packages

* OSS RabbitMQ v3.7.13
* Erlang v20.3.8.20
* HAProxy v1.8.19

## <a id="1148"></a> v1.14.8

**Release Date**: March 11, 2019

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

* Adds the `recreate-all-service-instances` errand.
For more information, see [Post-Deploy Errands](./install-config.html#post-deploy-errands).

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang cookie explicitly in the tile configuration,
  you are not affected by this issue.

* An issue with service metrics causes zombie processes to accumulate on
`rabbitmq-server` VMs.
This can cause the VM to run out of resources and BOSH to restart it.
If this occurs, Pivotal recommends that you stop the `service-metrics` job.
However, if you stop the job, metrics will not be available.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value requires cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

* There are issues with the configuration of pre-provisioned RabbitMQ with external load balancers.

### Packages

* OSS RabbitMQ v3.7.11
* Erlang v20.3.8.18
* HAProxy v1.8.17

## <a id="1147"></a> v1.14.7

**Release Date**: February 13, 2019

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

* Previously, when multiple Availability Zones (AZ) were selected for a single-node service plan, all instances of that plan would be deployed to the first AZ.
  Now the AZ is selected randomly from the configured list. This change does not affect existing instances and only applies to newly created instances.

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang cookie explicitly in the tile configuration,
  you are not affected by this issue.

* An issue with service metrics causes zombie processes to accumulate on
`rabbitmq-server` VMs.
This can cause the VM to run out of resources and BOSH to restart it.
If this occurs, Pivotal recommends that you stop the `service-metrics` job.
However, if you stop the job, metrics will not be available.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value requires cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.11
* Erlang v20.3.8.18
* HAProxy v1.8.17

## <a id="1146"></a> v1.14.6

**Release Date**: December 28, 2018

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

- Scripts to drop and restore AMQP(S) traffic.
  For more information, see [Drop and Restore AMQP(S) Traffic to a RabbitMQ Instance](./troubleshoot.html#drop-restore-traffic).

### Fixed Issue

This release fixes the following issue:

* In RabbitMQ for PCF v1.14.5 and earlier, the maximum number of file descriptors was not set
  and this limited the maximum number of file descriptors used by RabbitMQ.

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang Cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang Cookie explicitly in the tile configuration,
  you are not affected by this issue.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value require cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks and/or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.9
* Erlang v20.3.8.15
* HAProxy v1.6.13

## <a id="1145"></a> v1.14.5

**Release Date**: December 20, 2018

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

- Fixed issue where RabbitMQ metrics were not visible on Loggregator Firehose
  after an upgrade
- Set swap to 1 GB for RabbitMQ nodes
- Supports the Log Cache cf CLI plugin that enables developers to access logs
  for an on-demand service instance using the command `cf tail`.

  For more information about this feature, see
  [Access RabbitMQ Metrics for On-Demand Service Instances](./use.html#log-cache).

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang Cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang Cookie explicitly in the tile configuration,
  you are not affected by this issue.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value require cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks and/or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

* The maximum number of file descriptors is not set.
Therefore, RabbitMQ instances use the default value from the operating system.

### Packages

* OSS RabbitMQ v3.7.9
* Erlang v20.3.8.15
* HAProxy v1.6.13

## <a id="1144"></a> v1.14.4

**Release Date**: November 22, 2018

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Security Fixes

This release includes the following security fix:

* Critical [CVE-2018-15759: On Demand Services SDK Timing Attack Vulnerability](https://pivotal.io/security/cve-2018-15759)


### Features

New features and changes in this release:

* Adds mutual TLS between service metrics and the Loggregator system
* Removes credentials from the dashboard URL in the pre-provisioned service

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang Cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang Cookie explicitly in the tile configuration,
  you are not affected by this issue.

* If you upgrade to RabbitMQ for PCF v1.14, you cannot see RabbitMQ metrics
  on the Loggregator Firehose.
  This issue does not affect new installations.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value require cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks and/or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.8
* Erlang v20.3.8.10
* HAProxy v1.6.13

## <a id="1143"></a> v1.14.3

**Release Date**: November 1, 2018

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

* Smoke tests are now more resilient when using external load balancers.

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang Cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang Cookie explicitly in the tile configuration,
  you are not affected by this issue.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value require cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks and/or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

### Packages

* OSS RabbitMQ v3.7.8
* Erlang v20.3.8.9
* HAProxy v1.6.13

## <a id="1141"></a> v1.14.1 - Withdrawn

**Release Date**: October 2, 2018

**This release has been removed from Pivotal Network** because of an issue with open source RabbitMQ v3.7.7.

<p class="note breaking"><strong>Breaking Change:</strong>
  RabbitMQ for PCF v1.14 and later requires a Xenial stemcell.
  You must manually download and import a new stemcell into the Ops Manager Stemcell
  Library before deploying RabbitMQ for PCF v1.14.
  This might break automation you have set up to update RabbitMQ for PCF deployments
  that used Trusty stemcells.
  To download the Xenial stemcell from Pivotal Network, go to
  <a href="https://network.pivotal.io/products/stemcells-ubuntu-xenial">Stemcells for PCF (Ubuntu Xenial)</a>.
  For instructions on importing the stemcell, see
  <a href="https://docs-pcf-staging.cfapps.io/pivotalcf/opsguide/managing-stemcells.html">Importing and Managing Stemcells</a>.</p>

<p class="note breaking"><strong>Breaking Change:</strong>
  Syslog forwarding uses RFC5424 format, and the Legacy Format is no longer available.
  If you are upgrading and have Legacy Format selected in your existing syslog configuration,
  that setting is automatically reconfigured to use the RFC5424 format.
</p>

### Features

New features and changes in this release:

* The pre-provisioned RabbitMQ service is now optional. It is enabled by default for users who are upgrading from previous versions. It is
  disabled by default for all other users, but can be enabled in the configuration.
  For more information, see [Turning Off the Pre-Provisioned Service](./turn-pre-provisioned-off.html).
  If you use RabbitMQ for PCF for Spring Cloud Services, you must turn on the
  pre-provisioned RabbitMQ Service.

* The configuration tabs have been simplified to make it clearer which properties relate to the pre-provisioned service
  and which relate to the on-demand service.

* On-Demand instances with TLS enabled use HTTPS instead of HTTP inside the PCF network.

* RabbitMQ for PCF uses compiled BOSH releases, resulting in improved deployment times.
  However, you might still see some compilation when upgrading to v1.14.
  This is because if both compiled and source versions of the same BOSH release are available
  and the stemcell version used for deployment does not match the stemcell used for compilation,
  BOSH prefers to compile the source releases instead of using the compiled release.

* RabbitMQ for PCF now uses [floating stemcells](https://docs.pivotal.io/pivotalcf/2-2/customizing/understanding-stemcells.html).
  That means that RabbitMQ instances are recreated based on the new stemcell whenever a newer patch release of the stemcell becomes available.
  You can opt out of using a given stemcell version for any specific tile or
  deployment using OpsManager [Stemcell Library](https://docs.pivotal.io/pivotalcf/2-2/opsguide/managing-stemcells.html).

### Known Issues

This release has the following known issues:

* **[Security Issue]** The method for generating the Erlang Cookie is not secure.
  For more information about this security issue, see
    <a href="https://pivotal.io/security/cve-2018-1279">CVE-2018-1279: RabbitMQ cluster compromise due to deterministically generated cookie</a>.
  * If you rely on the tile to generate the cookie by leaving the Erlang cookie
  field blank, see [Security Issue with the Tile Generated Erlang Cookie](./install-config-pp.html#erlang-security-issue).
  * If you have set the Erlang Cookie explicitly in the tile configuration,
  you are not affected by this issue.

* Cluster scaling or changing the [Erlang Cookie](./install-config-pp.html#erlang) value require cluster downtime,
  and might result in failed deployments.
  For more information, see [Cluster Scaling Known Issue](./install-config-pp.html#scaling-issue) and
[Changing the Erlang Cookie Value Known Issue](./install-config-pp.html#changing-issue).

* Changing networks and/or IP addresses for the `RabbitMQ Server` job results in a failed deployment.
  For more information, see [Changing Network or IP Addresses Results in a Failed Deployment](./changing-ips.html).

* When errand run rules are set to **When Changed**, Ops Manager may not run the errands when the tile has relevant changes.
  For more information, see [Managing Errands in Ops Manager](https://docs.pivotal.io/pivotalcf/customizing/managing_errands.html).
  Pivotal recommends leaving the default run rule set to **On**.

* When on-demand service instances are enabled for TLS, the `port` property in
  `VCAP_SERVICES` for `amqp+ssl` incorrectly reports that the port is `5672`.
  The actual port used for `amqp+ssl` is `5671`.

### Packages

* OSS RabbitMQ v3.7.7
* Erlang v20.3.8.1
* HAProxy v1.6.13

## <a id="view"></a> View Release Notes for Another Version

To view the release notes for another product version, select the version from
the dropdown at the top of this page.
